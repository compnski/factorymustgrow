#+TITLE: Todo
* In progress
** Bugs
*** When adding a beltline, it shows up in the wrong place (Index from starting region, not target region)
*** When adding a beltline, it adds extra empty slots to the end if it tries to land in a filled slot.
*** Performance sucks
*** Names sometime still too long "courageous ram"
*** Plastic production seems hard to scale up, maybe oil issues?
*** Belt connections don't move with buildings
*** Pop-up recipe selector after placing building
*** Research dialog overwrites any existing dialog
*** Auto-select recipe for oil, water pumps
*** Better re-arranging? (Maybe with research)
*** Can't build rocket silo, factory doesn't fit enough resources
** Read-Only State
** Save UI state
*** Scroll position on page
*** Last page visited?
*** Links?
** Factory inventory upgrade -- Hold 2x required materials per factory
** Better UI for deleting belt lines
** Save progress during upgrades?
*** Offer to save progress during upgrades if possible
** Fix factories producing partial goods
*** TODO figure out progress bar
*** Update extractors to also use ProgressTracker
*** Update labs to use ProgressTracker
** BeltLine
*** Re-Connect when rebuilding
*** Only connect directly adjacent regions
*** Maybe some way to increase throughput?
*** Some better visibility of contents
*** Renaming? (Display name?)
** UI
*** Make Region Selector use GeneralDialog
**** Make Region selector pretty and use hexes?
*** Change Bus item by clicking
*** Recipe Display for Producers
** Inserters
*** Make sure they are properly taken from inventory when building
*** Maybe auto-build when creating main bus connection
*** Transfer speed
**** Each transfer point has defined speed (Items/second)
**** Can upgrade or build more transferers to incresae rate
**** Needs UX to show rate and to allow upgrading
** Labs
*** Over-research science means that you get a boost on the next one cause of leftover progress trackers
**** Can drop these on completion
**** Can globalize labs so that our remaining research is factored into other labs
**** Can track in-progress research and pass it to other labs (Spy on each other?)

* Next Ideas
** MainBus
*** Drag and drop
*** Any direction?
*** End can drop into other lanes
** Regions UI
*** Rename regions
*** Re-order tab bar
*** Keep scroll position per-region

** Blueprints
*** Somehow store lists of entities that can be rebuilt
** EntityId
*** Store 'nextId' in GameState
*** Add Id to many/most/all? entities
** Fuel
*** Gotta pay for smelters, power plants, etc
*** "fuel slot" holds any fuel
Consumed to power building
Buildings have an interal power buffer charged by fuel / electicity
Each step of recipe takes some amount of fuel/power
*** Cost to wire region for power?
** Power
*** Each region has separate power
*** Can generate in region, or export/import
*** Regions have limited size interconnect
*** day/night for solar?
*** Can built accumulator packs
** Liquids
*** Pipes are underground, under factory
*** Can't go on main belt
*** Lay out pipes in some fixed-width area
*** Connect extrators, factories, pipelines
** Limits
*** Main Bus Lanes
*** Building Slots
*** Max Building Count?
*** Power is a natural limit
** Transport
*** DONE Belt transport
Array of stacks
Pointer to each end
Pointers move, like ring buffer
**** Direct connects two regions
*** Pipe transport
Fluids are instantaneous?
**** Direct connects two adjacent regions
*** Train transport
Move large quantities every interval
**** Connects to rail grid
** MainBus
*** Pay for building
**** To add new lane
**** When extending
*** Allow belts to have variable height (not top-to-bottom)
** Different Building stats
*** Different buildings have different speeds / power consumption
** Regions
*** Cost to claim
*** Info UX
*** Distanace between cost to expand
*** Better differentiation
** Starter Building
*** Producers basic miner/smelter/assembler
In case you delete yours
*** Provides some basic power?
** Incinerator!
*** Can give tickets like satisfactory?
*** Maybe v0 just eats, v1 gives tickets?

* UI
** Fix Liquid stack sizes
** Tabs
** Card UI Rework
*** Show resource consumption per-minute
** Show blocked resource in recipe when unable to craft
* Logic
** Realtime clock
Discrete event simulation? Or just keep track of last tick, and loop a buch on first load to catch up
* Features
** Storage Upgrades
** Crafting Time
** Power
** Pollution
** Research
*** Unlocks
*** Upgrades
** Global Entity Limits
** Max Capacity Upgrades
*** 'Explore' with weapons to find new batches?
* Game Tuning
** Upgrades
*** Costs
*** Amount given
*** Tiering
* Code
** Autogeneration of entities/recipes?
* Questions
** Burner vs. Electical
* Ideas
** Tabs are 'areas'. Fixed cap of machines, fixed capacity of resources
*** Can 'search' for new areas with a given resource combo
*** Get back area of somewhat random space, set of resources based on search criteria.
e.g. you might look for an area with copper + iron + stone to start, or water + oil for plastic
*** Local Storage + Import / Export from global. Maybe takes 'train routes' to move
** "Main Bus" and Resource Movement
alex: Resources should have to be moved around.
Try having each Factory feed into the one above/below it, or into a main bus on the right side.
*** Each factory has input/output buffers
Some stack size, maybe based on #factories, but maybe not
*** Each factory has configurable outputs
**** Can output up/down
Puts resources into input buffer of other factories
**** Can output onto belt
Belt has many lanes, each configured for a given resource
**** Can pull inputs from main bus
*** Main bus
**** Cost belts to add extend the bus
***** Can add length to add more factories
***** Can add width to add more lanes
*** Ore Handling
**** Comes from miners, works like other factories, but no import
****
* Performance Ideas
** Keep bug/turret state in separate timer thread
Currently state is in the main react thread. This is causing stuttering.
Instead have a separate thread doing game logic, and have 'Tick' just copy that state into react on some timer.
