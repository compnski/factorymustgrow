(this.webpackJsonpfactorymustgrow=this.webpackJsonpfactorymustgrow||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){},13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(6),o=n.n(a),i=(n(11),n(3)),u=(n(12),n(13),n(4)),s=n(1),p={Name:"Assembler",Icon:"assembling-machine-1",StackSize:50,StorageUpgradeType:"Solid",ResearchUpgradeItems:[]},d={Name:"Miner",Icon:"electric-mining-drill",StackSize:50,StorageUpgradeType:"Solid",ResearchUpgradeItems:[]},l={Name:"Iron Ore",Icon:"iron-ore",StackSize:50,StorageUpgradeType:"Solid",ResearchUpgradeItems:[]},m={Name:"Copper Ore",Icon:"copper-ore",StackSize:100,StorageUpgradeType:"Solid",ResearchUpgradeItems:[]},y={Name:"Copper Plate",Icon:"copper-plate",StackSize:100,StorageUpgradeType:"Solid",ResearchUpgradeItems:[]},j={Name:"Copper Wire",Icon:"copper-cable",StackSize:100,StorageUpgradeType:"Solid",ResearchUpgradeItems:[]},C={Name:"Stone Furnace",Icon:"stone-furnace",StackSize:50,StorageUpgradeType:"Solid",ResearchUpgradeItems:[]},b={Name:"Stone",Icon:"stone",StackSize:50,StorageUpgradeType:"Solid",ResearchUpgradeItems:[]},O={Name:"Iron Plate",Icon:"iron-plate",StackSize:50,StorageUpgradeType:"Solid",ResearchUpgradeItems:[]},f={Name:"Gear",Icon:"iron-gear-wheel",StackSize:100,StorageUpgradeType:"Solid",ResearchUpgradeItems:[]},S={Name:"Green Chip",Icon:"electronic-circuit",StackSize:100,StorageUpgradeType:"Solid",ResearchUpgradeItems:[]},g={Name:"Stone",Icon:"stone",DurationSeconds:1,ProducerType:"Miner",Input:[],Output:[{Entity:b,Count:1}]},h={Name:"Stone Furnace",Icon:"stone-furnace",DurationSeconds:1,ProducerType:"Assembler",Input:[{Entity:b,Count:5}],Output:[{Entity:C,Count:1}]},N={Name:"Iron Ore",Icon:"iron-ore",DurationSeconds:1,ProducerType:"Miner",Input:[],Output:[{Entity:l,Count:1}]},E={Name:"Iron Plate",Icon:"iron-plate",DurationSeconds:1,ProducerType:"Smelter",Input:[{Entity:l,Count:1}],Output:[{Entity:O,Count:1}]},I={Name:"Copper Ore",Icon:"copper-ore",DurationSeconds:1,ProducerType:"Miner",Input:[],Output:[{Entity:m,Count:1}]},P={Name:"Copper Plate",Icon:"copper-plate",DurationSeconds:1,ProducerType:"Smelter",Input:[{Entity:m,Count:1}],Output:[{Entity:y,Count:1}]},v={Name:"Gear",Icon:"iron-gear-wheel",DurationSeconds:1,ProducerType:"Assembler",Input:[{Entity:O,Count:2}],Output:[{Entity:f,Count:1}]},R={Name:"Copper Wire",Icon:"copper-cable",DurationSeconds:1,ProducerType:"Assembler",Input:[{Entity:y,Count:1}],Output:[{Entity:j,Count:2}]},x={Name:"Green Chip",Icon:"electronic-circuit",DurationSeconds:1,ProducerType:"Assembler",Input:[{Entity:j,Count:3},{Entity:O,Count:1}],Output:[{Entity:S,Count:1}]},k={Name:"Miner",Icon:"electric-mining-drill",DurationSeconds:1,ProducerType:"Assembler",Input:[{Entity:O,Count:10},{Entity:f,Count:5},{Entity:S,Count:3}],Output:[{Entity:d,Count:1}]},U={Name:"Assembler",Icon:"assembling-machine-1",DurationSeconds:1,ProducerType:"Assembler",Input:[{Entity:O,Count:9},{Entity:f,Count:5},{Entity:S,Count:3}],Output:[{Entity:p,Count:1}]},T=function(e,t){return e.get(t.Name)||0},A=function(e,t){return t.StackSize*(1+(e.get(t.Name)||0))},w=function(e,t){return function(e,t){var n=!0;return t.forEach((function(t){var c=t.Entity,r=t.Count;T(e,c)<r&&(n=!1)})),n}(e,t)?[e.withMutations((function(e){t.forEach((function(t){var n=t.Entity,c=t.Count;e.update(n.Name,(function(e){return(e||0)-c}))}))})),!0]:[e,!1]},M=function(e,t,n){return function(e,t,n){var c=!0;return n.forEach((function(n){var r=n.Entity,a=n.Count;T(e,r)+a>A(t,r)&&(c=!1)})),c}(e,t,n)?[e.withMutations((function(e){n.forEach((function(t){var n=t.Entity,c=t.Count;e.update(n.Name,(function(e){return(e||0)+c}))}))})),!0]:[e,!1]};function D(e,t){switch(e){case"Assembler":return[{Entity:p,Count:1}];case"Smelter":return[{Entity:C,Count:1}];case"Miner":return[{Entity:d,Count:1}];case"ChemFactory":case"Refinery":case"Pumpjack":return[]}}function z(e,t){var n=t.type,c=t.producerName,r=e.EntityProducers.get(c);if(!r)return console.log("Cannot find producer with name ".concat(c)),e;var a,o=e.EntityCounts,u=e.EntityStorageCapacityUpgrades,p=e.EntityProducers;switch(n){case"Produce":var d=w(o,r.Recipe.Input),l=Object(i.a)(d,2);if(o=l[0],a=l[1]){var m=M(o,u,r.Recipe.Output),y=Object(i.a)(m,2);o=y[0],a=y[1]}return a?Object(s.a)(Object(s.a)({},e),{},{EntityCounts:o}):e;case"AddProducer":if(r.ProducerCount>50)return e;var j=w(o,D(r.Recipe.ProducerType,r.ProducerCount)),C=Object(i.a)(j,2);return o=C[0],(a=C[1])?(p=p.set(c,Object(s.a)(Object(s.a)({},r),{},{ProducerCount:(r.ProducerCount||0)+1})),Object(s.a)(Object(s.a)({},e),{},{EntityCounts:o,EntityProducers:p})):e;case"RemoveProducer":if(r.ProducerCount<=0)return e;var b=M(o,u,D(r.Recipe.ProducerType,r.ProducerCount)),O=Object(i.a)(b,2);return o=O[0],(a=O[1])?(p=p.set(c,Object(s.a)(Object(s.a)({},r),{},{ProducerCount:(r.ProducerCount||0)-1})),Object(s.a)(Object(s.a)({},e),{},{EntityCounts:o,EntityProducers:p})):e;case"AddProducerCapacity":case"RemoveProducerCapacity":case"ResearchUpgrade":default:return e}}var F=n(0),G={Assembler:"assembling-machine-1",Smelter:"stone-furnace",Miner:"electric-mining-drill",ChemFactory:"",Refinery:"",Pumpjack:""},B=function(e){return G[e.Recipe.ProducerType]},J=function(e){var t=e.recipe;return Object(F.jsxs)("div",{className:"recipe",children:[Object(F.jsx)("span",{children:"Recipe: "}),t.Input.map((function(e,t){return Object(F.jsxs)("span",{children:[Object(F.jsx)("span",{children:e.Count}),Object(F.jsx)("div",{className:"icon ".concat(e.Entity.Icon)})]},t)})),Object(F.jsx)("span",{children:"="}),t.Output.map((function(e,t){return Object(F.jsxs)("span",{children:[Object(F.jsx)("span",{children:e.Count}),Object(F.jsx)("div",{className:"icon ".concat(e.Entity.Icon)})]},t)}))]})},L=function(e){var t,n,c=e.producer,r=e.dispatch,a=e.globalEntityCount,o=e.entityStorageCapacity;return c?Object(F.jsxs)("div",{className:"Producer",children:[Object(F.jsx)("div",{className:"title",children:Object(F.jsxs)("span",{children:[c.Recipe.Name," "]})}),Object(F.jsxs)("div",{className:"infoRow",children:[Object(F.jsx)("div",{onClick:function(){r({producerName:c.Recipe.Name,type:"Produce"})},className:c.Recipe.Icon+" icon clickable"}),Object(F.jsx)("div",{className:"rate",children:(n=c,t=1/n.Recipe.DurationSeconds*n.ProducerCount,"".concat(t,"/m"))}),Object(F.jsxs)("div",{className:"plusMinus",children:[Object(F.jsx)("span",{onClick:function(){return r({producerName:c.Recipe.Name,type:"AddProducer"})},className:"clickable",children:"+"}),Object(F.jsx)("span",{onClick:function(){return r({producerName:c.Recipe.Name,type:"RemoveProducer"})},className:"clickable",children:"-"})]}),Object(F.jsx)("span",{className:"icon producerTypeIcon ".concat(B(c))}),Object(F.jsxs)("div",{className:"producerCount",children:[Object(F.jsx)("span",{className:"currentCapacity",children:c.ProducerCount}),Object(F.jsx)("span",{children:"/"}),Object(F.jsx)("span",{className:"maxCapacity",children:50})]}),Object(F.jsxs)("div",{className:"plusMinus maxCapacity",children:[Object(F.jsx)("span",{onClick:function(){return r({producerName:c.Recipe.Name,type:"AddProducerCapacity"})},className:"clickable",children:"+"}),Object(F.jsx)("span",{onClick:function(){return r({producerName:c.Recipe.Name,type:"RemoveProducerCapacity"})},className:"clickable",children:"-"})]}),Object(F.jsx)("div",{className:"filler"}),Object(F.jsx)("div",{className:"icon space-science-pack clickable"})]}),Object(F.jsxs)("div",{className:"infoRow",children:[Object(F.jsxs)("span",{className:"count",children:[a(c.Recipe.Output[0].Entity),"/",o(c.Recipe.Output[0].Entity)]}),c.Recipe.Input.length>0?Object(F.jsx)(J,{recipe:c.Recipe}):Object(F.jsx)("div",{})]})]}):Object(F.jsx)("div",{className:"NoProducer"})},W=function(e){return{Recipe:e,ProducerCount:0,ProducerCapacityUpgradeCount:0,ProducerMaxCapacityUpgradeCount:0,ResearchUpgradeCount:0}},q=[N,I,g,h,E,P,R,v,x,k,U],H={EntityCounts:Object(u.a)({Miner:3}),EntityStorageCapacityUpgrades:Object(u.a)(),EntityProducers:Object(u.a)(q.map((function(e){return[e.Name,W(e)]})))};var K=function(){var e=Object(c.useReducer)(z,H),t=Object(i.a)(e,2),n=t[0],r=t[1],a=function(e){return T(n.EntityCounts,e)},o=function(e){return A(n.EntityStorageCapacityUpgrades,e)};!function(e,t){var n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=e})),Object(c.useEffect)((function(){var e=setInterval((function(){null!=n.current&&n.current()}),t);return function(){return clearInterval(e)}}),[t])}((function(){n.EntityProducers.forEach((function(e,t){for(var n=0;n<e.ProducerCount;n++)r({producerName:t,type:"Produce"})}))}),1e3);var u=q.map((function(e){return Object(F.jsx)(L,{producer:n.EntityProducers.get(e.Name),dispatch:r,globalEntityCount:a,entityStorageCapacity:o},e.Name)}));return Object(F.jsxs)("div",{className:"App",children:[u,Object(F.jsx)("a",{href:"https://github.com/compnski/factorymustgrow",children:"Github"})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))};o.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsx)(K,{})}),document.getElementById("root")),Q()}},[[15,1,2]]]);
//# sourceMappingURL=main.2ecc3046.chunk.js.map